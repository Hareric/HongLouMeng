## 项目说明

使用Tensorflow框架并利用基于LSTM的循环神经网络（RNN）对红楼梦的文本进行学习。训练过程每次使用一定长度的文本输入进神经网络进行学习。将训练完成后的模型，结合使用采样策略和集束搜索方法生成指定长度的红楼梦文本。

## 配置说明

config.py 中可设置搜索策略以及采样策略

### train参数

•	init_scale：参数使用均匀分布进行初始化，该值为均匀分布的上下界

•	learning_rate：学习率

•	max_grad_norm：对梯度进行规范化，避免梯度爆炸（gradient clipping）

•	num_layers：RNN的层级数目

•	num_steps：RNN展开的步骤数（每次训练多少个字符）

•	hidden_size：神经网络隐含层的维度

•	iteration：模型总共迭代次数

•	save_freq：每迭代多少次保存一次模型，同时进行一次生成

•	keep_prob：dropout的概率

•	batch_size：min-batch的大小

•	model_path：模型保存路径


### generate参数

•	save_time: 载入第save_time次保存的模型

•	is_sample：是否采用sample策略，设置为False是采用max策略

•	is_beams：是否采用beam-search进行解码，设置为False时不采用（相当于beam_size=1）

•	beam_size：beam-search的窗口大小

•	len_of_generation：期望生成文本的长度（包括多少个字）

start_sentence：期望生成文本的开始部分（可以是一个句子，一个词，也可以仅仅只是一个字）


## 效果展示

### 原文
正门之上，有一匾，匾上大书“敕造宁国府”五个大字。黛玉想道：这是外祖母之长房了。想着，又往西行，不多远，照样也是三间大门，方是荣国府了。却不进正门，只进了西边角门。那轿夫抬进去，走了一射之地，将转弯时，便歇下退出去了。后面的婆子们已都下了轿，赶上前来。另换了三四个衣帽周全十七八岁的小厮上来，复抬起轿子。众婆子步下围随至一垂花门前落下。

### max采样+集束搜索(宽度为1)
**正门之上，有一匾，匾上大书“敕造宁国府”五个大字。黛玉想道：这是外祖母之长房了。想着，又往西行，不多远，照样也是三间大门，方是荣国府了。却不进正门，只进了西边角门。** 贾政道：“这是什么事？”贾政道：“这是什么事？”贾政道：“这是什么事？”贾政道：“这是什么事？”贾政道：“这是什么事？”贾政道：“这是什么事？”贾政道：“这是什么事？”贾政道：“这是什么事？”

### max采样+集束搜索(宽度为2)
**正门之上，有一匾，匾上大书“敕造宁国府”五个大字。黛玉想道：这是外祖母之长房了。想着，又往西行，不多远，照样也是三间大门，方是荣国府了。却不进正门，只进了西边角门。** ”贾政道：“这是什么事？”贾政道：“这是什么事？”贾政道：“这是什么事？”贾政道：“这是什么事？”贾政道：“这是什么事？”贾政道：“这是什么事？”贾政道：“这是什么事？”贾政道：“这是什么？

### sample采样+集束搜索(宽度为1)
**正门之上，有一匾，匾上大书“敕造宁国府”五个大字。黛玉想道：这是外祖母之长房了。想着，又往西行，不多远，照样也是三间大门，方是荣国府了。却不进正门，只进了西边角门。** 但蒙于自己生俱热闹。”贾赦便道：“照必奇全。今儿不见会，膝里倒有应花党；又痴遭。”贾政忙答应起去。贾赦道：“你支着匣子，吃得是起来否。早这样一安儿查的人，没事罢！若是我叫我。和贾琏道：”

### sample采样+集束搜索(宽度为2)
**正门之上，有一匾，匾上大书“敕造宁国府”五个大字。黛玉想道：这是外祖母之长房了。想着，又往西行，不多远，照样也是三间大门，方是荣国府了。却不进正门，只进了西边角门。** ”因此便至书间，只见一个跛见他进来了。贾母便向贾政道：“论不得他这么着。”贾琏笑道：“什么事呢？”凤姐听了，都诧异道：“这个什么事，我瞧瞧。”原来贾政、贾兰回来，告春带着贾琏去了

## 评价
可以看出，sample采样策略相对于max采样策略，可以生成语义更加丰富的句子，这是因为sample采样在对字符进行重采样的时候引入了概率性，而使用集束搜索时，集束宽度为2的生成效果好过集束宽度为1，这可能是因为红楼梦有较多的字长大于2的专有名词。


